<html lang="zh-cn"><br><head><br>    <meta charset="utf-8"><br>    <meta name="keywords" content=" "><br>    <meta name="description" content=" "><br>    <meta http-equiv="x-ua-compatible" content="IE=Edge, chrome=1"><br>    <meta name="renderer" content="webkit"><br>    <meta name="viewport" content="initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"><br>    <title>snarkdown</title><br>    <script><br>        const TAGS = {<br>            ‘’ : [‘<em>‘,’</em>‘],<br>            <em> : [‘<strong>‘,’</strong>‘],<br>            ‘\n’ : [‘<br />‘],<br>            ‘ ‘ : [‘<br />‘],<br>            ‘-‘: [‘<hr />‘]<br>        };<br><br>        /<strong> Outdent a string based on the first indented line’s leading whitespace<br>         <em>  @private
         </em>/<br>        function outdent(str) {<br>            return str.replace(RegExp(‘^’+(str.match(/^(\t| )+/) || ‘’)[0], ‘gm’), ‘’);<br>        }<br><br>        /</strong> Encode special attribute characters to HTML entities in a String.<br>         <em>  @private
         </em>/<br>        function encodeAttr(str) {<br>            return (str+’’).replace(/“/g, ‘&quot;’).replace(/</g, '&lt;').replace(/>/g, ‘&gt;’);<br>        }<br><br>        /<em>* Parse Markdown into an HTML String. </em>/<br>        export default function parse(md, prevLinks) {<br>            let tokenizer = /((?:^|\n+)(?:\n—+|* *(?: *)+)\n)|(?:^<code>(\w*)\n([\s\S]*?)\n</code>$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n<em>)|((?:(?:^|\n)([&gt;</em>+-]|\d+.)\s+.<em>)+)|(?:![([^]]</em>?)](([^)]+?)))|([)|(](?:(([^)]+?)))?)|(?:(?:^|\n+)([^\s].<em>)\n(-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,3})\s</em>(.+)(?:\n+|$))|(?:<code>([^</code>].<em>?)`)|(  \n\n</em>|\n{2,}|__|**|[</em><em>])/gm,<br>                context = [],<br>                out = ‘’,<br>                links = prevLinks || {},<br>                last = 0,<br>                chunk, prev, token, inner, t;<br><br>            function tag(token) {<br>                var desc = TAGS[token.replace(/\</em>/g,’_’)[1] || ‘’],<br>                    end = context[context.length-1]==token;<br>                if (!desc) return token;<br>                if (!desc[1]) return desc[0];<br>                context<a href="token">end?’pop’:’push’</a>;<br>                return desc[end|0];<br>            }<br><br>            function flush() {<br>                let str = ‘’;<br>                while (context.length) str += tag(context[context.length-1]);<br>                return str;<br>            }<br><br>            md = md.replace(/^[(.+?)]:\s<em>(.+)$/gm, (s, name, url) =&gt; {<br>                links[name.toLowerCase()] = url;<br>                return ‘’;<br>            }).replace(/^\n+|\n+$/g, ‘’);<br><br>            while ( (token=tokenizer.exec(md)) ) {<br>                prev = md.substring(last, token.index);<br>                last = tokenizer.lastIndex;<br>                chunk = token[0];<br>                if (prev.match(/<a href="\\\\">^\</a></em>\$/)) {<br>                    // escaped<br>                }<br>                // Code/Indent blocks:<br>                else if (token[3] || token[4]) {<br>                    chunk = ‘<pre class="code '+(token[4]?'poetry':token[2].toLowerCase())+'">‘+outdent(encodeAttr(token[3] || token[4]).replace(/^\n+|\n+$/g, ‘’))+’</pre>‘;<br>                }<br>                // &gt; Quotes, -<em> lists:<br>                else if (token[6]) {<br>                    t = token[6];<br>                    if (t.match(/./)) {<br>                        token[5] = token[5].replace(/^\d+/gm, ‘’);<br>                    }<br>                    inner = parse(outdent(token[5].replace(/^\s</em>[&gt;<em>+.-]/gm, ‘’)));<br>                    if (t===’&gt;’) t = ‘blockquote’;<br>                    else {<br>                        t = t.match(/./) ? ‘ol’ : ‘ul’;<br>                        inner = inner.replace(/^(.</em>)(\n|$)/gm, ‘<li>$1</li>‘);<br>                    }<br>                    chunk = ‘&lt;’+t+’&gt;’ + inner + ‘&lt;/‘+t+’&gt;’;<br>                }<br>                // Images:<br>                else if (token[8]) {<br>                    chunk = <code>&lt;img src=&quot;${encodeAttr(token[8])}&quot; alt=&quot;${encodeAttr(token[7])}&quot;&gt;</code>;<br>                }<br>                // Links:<br>                else if (token[10]) {<br>                    out = out.replace(‘<a>‘, <code>&lt;a href=&quot;${encodeAttr(token[11] || links[prev.toLowerCase()])}&quot;&gt;</code>);<br>                    chunk = flush() + ‘</a>‘;<br>                }<br>                else if (token[9]) {<br>                    chunk = ‘<a>‘;<br>                }<br>                // Headings:<br>                else if (token[12] || token[14]) {<br>                    t = ‘h’ + (token[14] ? token[14].length : (token[13][0]===’=’?1:2));<br>                    chunk = ‘&lt;’+t+’&gt;’ + parse(token[12] || token[15], links) + ‘&lt;/‘+t+’&gt;’;<br>                }<br>                // <code>code</code>:<br>                else if (token[16]) {<br>                    chunk = ‘<code>‘+encodeAttr(token[16])+’</code>‘;<br>                }<br>                // Inline formatting: <em>em</em>, <strong>strong</strong> &amp; friends<br>                else if (token[17] || token[1]) {<br>                    chunk = tag(token[17] || ‘–’);<br>                }<br>                out += prev;<br>                out += chunk;<br>            }<br><br>            return (out + md.substring(last) + flush()).trim();<br>        }<br>    </script><br></head><br><body><br><br></body><br></html>